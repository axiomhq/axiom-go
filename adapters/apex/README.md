# Axiom Go Adapter for apex/log

Adapter to ship logs generated by [apex/log](https://github.com/apex/log) to
Axiom.

## Quickstart

Follow the [Axiom Go Quickstart](https://github.com/axiomhq/axiom-go#quickstart)
to install the Axiom Go package and configure your environment.

Import the package:

```go
// Imported as "adapter" to not conflict with the "apex/log" package.
import adapter "github.com/axiomhq/axiom-go/adapters/apex"
```

You can also configure the adapter using [options](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/apex#Option)
passed to the [New](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/apex#New)
function:

```go
handler, err := adapter.New(
    adapter.SetDataset("AXIOM_DATASET"),
)
```

To configure the underlying client manually either pass in a client that was
created according to the [Axiom Go Quickstart](https://github.com/axiomhq/axiom-go#quickstart)
using [SetClient](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/apex#SetClient)
or pass [client options](https://pkg.go.dev/github.com/axiomhq/axiom-go/axiom#Option)
to the adapter using [SetClientOptions](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/apex#SetClientOptions).

```go
import (
    "github.com/axiomhq/axiom-go/axiom"
    adapter "github.com/axiomhq/axiom-go/adapters/apex"
)

// ...

handler, err := adapter.New(
    adapter.SetClientOptions(
        axiom.SetPersonalTokenConfig("AXIOM_TOKEN", "AXIOM_ORG_ID"),
    ),
)
```

> [!IMPORTANT]
> The adapter uses a buffer to batch events before sending them to Axiom. This
> buffer must be flushed explicitly by calling
> [Close](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/apex#Handler.Close).
> Checkout out the [example](../../examples/apex/main.go).
