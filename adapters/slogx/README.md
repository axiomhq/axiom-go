# Axiom Go Adapter for golang.org/x/exp/slog (pre Go 1.21)

Adapter to ship logs generated by
[slog](https://pkg.go.dev/golang.org/x/exp/slog) to Axiom.

## Quickstart

Follow the [Axiom Go Quickstart](https://github.com/axiomhq/axiom-go#quickstart)
to install the Axiom Go package and configure your environment.

Import the package:

```go
// Imported as "adapter" to not conflict with the "slog" package.
import adapter "github.com/axiomhq/axiom-go/adapters/slogx"
```

You can also configure the adapter using [options](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/slogx#Option)
passed to the [New](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/slogx#New)
function:

```go
handler, err := adapter.New(
    adapter.SetDataset("AXIOM_DATASET"),
)
```

To configure the underlying client manually either pass in a client that was
created according to the [Axiom Go Quickstart](https://github.com/axiomhq/axiom-go#quickstart)
using [SetClient](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/slogx#SetClient)
or pass [client options](https://pkg.go.dev/github.com/axiomhq/axiom-go/axiom#Option)
to the adapter using [SetClientOptions](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/slogx#SetClientOptions).

```go
import (
    "github.com/axiomhq/axiom-go/axiom"
    adapter "github.com/axiomhq/axiom-go/adapters/slogx"
)

// ...

handler, err := adapter.New(
    adapter.SetClientOptions(
        axiom.SetPersonalTokenConfig("AXIOM_TOKEN", "AXIOM_ORG_ID"),
    ),
)
```

> [!IMPORTANT]
> The adapter uses a buffer to batch events before sending them to Axiom. This
> buffer must be flushed explicitly by calling
> [Close](https://pkg.go.dev/github.com/axiomhq/axiom-go/adapters/slogx#Handler.Close).
> Checkout the [example](../../examples/slogx/main.go).
